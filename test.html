<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>無題ドキュメント</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<style>
body, html { margin: 0; padding: 0; background: #000; overflow: hidden; width: 100%; height: 100%; }

.accordion-wrapper {
display: flex;
width: 100%;
height: 100vh;
background: #000;
overflow: hidden;
}

.accordion-item {
position: relative;
flex-shrink: 0;
width: 15%; /* 通常時 */
height: 100%;
overflow: hidden;
border-right: 1px solid rgba(255,255,255,0.2);
box-sizing: border-box;
}

/* 最初の要素（一番左）だけ大きくする */
.accordion-item:first-child {
width: 40%;
}

.bg-image {
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:50% center;
  background-repeat:no-repeat;
}
.vertical-title {
position: absolute;
bottom: 50px;
left: 50%;
transform: translateX(-50%);
writing-mode: vertical-rl;
color: #fff;
font-size: 3rem;
letter-spacing: 0.5em;
z-index: 10;
pointer-events: none;
text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
}
</style>

</head>
<body>

<div class="accordion-wrapper" id="slider">
<div class="accordion-item" data-bg="image1.webp">
<div class="bg-image"></div>
<h2 class="vertical-title">JAPAN</h2>
</div>
<div class="accordion-item" data-bg="image2.webp">
<div class="bg-image"></div>
<h2 class="vertical-title">ASIA</h2>
</div>
<div class="accordion-item" data-bg="image1.webp">
<div class="bg-image"></div>
<h2 class="vertical-title">EUROPE</h2>
</div>
<div class="accordion-item" data-bg="image2.webp">
<div class="bg-image"></div>
<h2 class="vertical-title">AMERICA</h2>
</div>
<div class="accordion-item" data-bg="image1.webp">
<div class="bg-image"></div>
<h2 class="vertical-title">AFRICA</h2>
</div>
</div>

<script>
const slider = document.getElementById('slider');

// 背景画像のセット
document.querySelectorAll('.accordion-item').forEach(item => {
const bg = item.getAttribute('data-bg');
item.querySelector('.bg-image').style.backgroundImage = "url('" + bg + "')";
});

function moveNext() {
const items = document.querySelectorAll('.accordion-item');
const first = items[0];
const second = items[1];
const firstImg = first.querySelector('.bg-image');
const secondImg = second.querySelector('.bg-image');

const tl = gsap.timeline({
onComplete: () => {
slider.appendChild(first);
gsap.set(slider, { x: 0 });
// 終わったら位置をリセット
gsap.set([firstImg, secondImg], { x: "0%" });
}
});

// 全体のスライド
tl.to(slider, {
x: "-15%",
duration: 1.2,
ease: "power4.inOut"
}, 0);

// 【ここ！】画像をさらに「左（マイナス）」へスライドさせます
// これで外枠の動きと「差」が出て、中身が動いて見えます
tl.to(firstImg, {
  backgroundPosition: "60% center",
  duration: 1.2,
  ease: "power4.inOut"
}, 0);

tl.fromTo(secondImg,
  { backgroundPosition: "30% center" },
  {
    backgroundPosition: "50% center",
    duration: 1.2,
    ease: "power4.inOut"
  },
  0
);

tl.to(first, { width: "15%", duration: 1.2, ease: "power4.inOut" }, 0);
tl.to(second, { width: "40%", duration: 1.2, ease: "power4.inOut" }, 0);
}
setInterval(moveNext, 2000);
</script>

</body>
</html>